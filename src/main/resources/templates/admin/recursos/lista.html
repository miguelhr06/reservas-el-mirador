<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Gestión de Recursos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">

    <style>
        body {
            min-height: 100vh;
            background:
                linear-gradient(rgba(0, 0, 0, 0.55), rgba(0, 0, 0, 0.6)),
                url('/img/bg-campestre.jpg') center/cover fixed no-repeat;
        }

        .navbar-campestre {
            background: linear-gradient(90deg, #355e3b, #6f8f4f);
        }

        .brand-logo {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 8px;
        }

        .card-campestre {
            border-radius: 18px;
            overflow: hidden;
            border: none;
        }

        .card-header-campestre {
            background: linear-gradient(135deg, #4b7f52, #a3c05b);
            color: #fff;
        }

        .estado-pill {
            padding: 0.25rem 0.7rem;
            border-radius: 999px;
            font-size: 0.75rem;
            font-weight: 600;
            display: inline-block;
        }

        /* Colores de estado (solo CSS, sin alterar lógica) */
        .estado-disponible {
            background-color: #e6f4ea;
            color: #1b5e20;
        }
        .estado-mantenimiento {
            background-color: #fff3cd;
            color: #8a6d3b;
        }
        .estado-fuera-servicio {
            background-color: #f8d7da;
            color: #842029;
        }

        .table thead th {
            border-bottom-width: 0;
        }

        .table-hover tbody tr:hover {
            background-color: rgba(233, 245, 230, 0.8);
        }

        .badge-tipo {
            background-color: #e9f5e6;
            color: #355e3b;
            font-weight: 500;
        }

        .btn-campestre {
            background: linear-gradient(135deg, #4b7f52, #88b04b);
            border: none;
            border-radius: 999px;
        }

        .btn-campestre:hover {
            filter: brightness(1.05);
        }

        .btn-outline-campestre {
            border-radius: 999px;
            border-color: #6f8f4f;
            color: #3f5f38;
        }

        .btn-outline-campestre:hover {
            background-color: #6f8f4f;
            color: #fff;
        }

        .titulo-seccion {
            color: #f8f9fa;
        }

        .subtitulo-seccion {
            color: #dbe7d5;
            font-size: 0.95rem;
        }

        @media (max-width: 767.98px) {
            .titulo-seccion,
            .subtitulo-seccion {
                text-align: center;
            }
        }
    </style>
</head>
<body>

    <!-- NAVBAR -->
    <nav class="navbar navbar-expand-lg navbar-dark navbar-campestre shadow-sm">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="/recepcion/dashboard">
                <span class="fw-semibold">El mirador</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCampestre" aria-controls="navbarCampestre" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarCampestre">
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" href="/admin/recursos">
                            <i class="bi bi-grid"></i> Recursos
                        </a>
                    </li>
                    <li class="nav-item">
                        <span class="nav-link">
                            <i class="bi bi-person-workspace"></i> Panel administrador
                        </span>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- CONTENIDO PRINCIPAL -->
    <div class="container py-5">
        <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center mb-4">
            <div class="mb-3 mb-md-0">
                <h2 class="titulo-seccion mb-1">
                    <i class="bi bi-house-door-fill me-2"></i>Inventario de Recursos
                </h2>
                <p class="subtitulo-seccion mb-0">
                    Controla bungalows, zonas de parrilla, áreas verdes y todos los espacios del restaurante campestre.
                </p>
            </div>
            <div>
                <a href="/admin/recursos/nuevo" class="btn btn-campestre text-white">
                    <i class="bi bi-plus-lg me-1"></i> Nuevo Recurso
                </a>
            </div>
        </div>

        <div class="card card-campestre shadow-lg">
            <div class="card-header card-header-campestre d-flex justify-content-between align-items-center">
                <div>
                    <span class="small text-uppercase fw-light d-block">Panel de administración</span>
                    <strong>Recursos del restaurante</strong>
                </div>
                <div class="text-end d-none d-sm-block">
                    <span class="badge bg-light text-dark">
                        <i class="bi bi-tree-fill me-1"></i> Zonas campestres
                    </span>
                </div>
            </div>
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table table-hover mb-0 align-middle">
                        <thead>
                            <tr class="text-center text-uppercase small">
                                <th class="bg-dark text-white">ID</th>
                                <th class="bg-dark text-white text-start">Nombre</th>
                                <th class="bg-dark text-white">Tipo</th>
                                <th class="bg-dark text-white">Precio Base</th>
                                <th class="bg-dark text-white">Capacidad</th>
                                <th class="bg-dark text-white">Estado</th>
                                <th class="bg-dark text-white">Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="recurso : ${recursos}">
                                <td class="text-center" th:text="${recurso.idRecurso}">1</td>
                                <td class="fw-semibold" th:text="${recurso.nombre}">Bungalow 1</td>
                                <td class="text-center">
                                    <span class="badge badge-tipo" th:text="${recurso.tipo.nombre}">Tipo</span>
                                </td>
                                <td class="text-center" th:text="'S/ ' + ${recurso.precioBase}">S/ 100</td>
                                <td class="text-center" th:text="${recurso.capacidad}">2</td>
                                <td class="text-center">
                                    <!-- Mantenemos la lógica, solo añadimos estilos genéricos -->
                                    <span 
                                        class="estado-pill"
                                        th:classappend="${recurso.estado} == 'DISPONIBLE' ? ' estado-disponible' 
                                                        : (${recurso.estado} == 'MANTENIMIENTO' ? ' estado-mantenimiento' 
                                                        : ' estado-fuera-servicio')"
                                        th:text="${recurso.estado}">
                                        DISPONIBLE
                                    </span>
                                </td>
                                <td class="text-center">
                                    <div class="btn-group" role="group">
                                        <a th:href="@{/admin/recursos/editar/{id}(id=${recurso.idRecurso})}" class="btn btn-warning btn-sm" title="Editar">
                                            <i class="bi bi-pencil-square"></i>
                                        </a>
                                        <a th:href="@{/admin/recursos/eliminar/{id}(id=${recurso.idRecurso})}" 
                                           class="btn btn-danger btn-sm" 
                                           title="Eliminar"
                                           onclick="return confirm('¿Seguro que deseas eliminar este recurso?')">
                                            <i class="bi bi-trash3"></i>
                                        </a>
                                    </div>
                                </td>
                            </tr>
                            <!-- Puedes agregar un mensaje cuando no haya recursos si quieres, sin tocar la lógica principal -->
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="card-footer text-muted small d-flex justify-content-between align-items-center">
                <span>
                    <i class="bi bi-info-circle me-1"></i>
                    Verifica el estado y capacidad antes de confirmar reservas.
                </span>
                <span class="d-none d-sm-inline">
                    <i class="bi bi-geo-alt-fill me-1"></i> Restaurante Campestre - Área de reservas
                </span>
            </div>
        </div>

        <div class="mt-4 d-flex justify-content-between">
            <a href="/recepcion/dashboard" class="btn btn-outline-campestre">
                <i class="bi bi-arrow-left-circle me-1"></i> Volver al Dashboard
            </a>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
